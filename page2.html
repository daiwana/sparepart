<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wanna_Auto - E-commerce Spare Part Motor</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/page2.css">
  <style>
    /* Animasi pop pada card produk */
    .pop {
      animation: pop-scale 0.3s;
    }
    @keyframes pop-scale {
      0% { transform: scale(1); }
      50% { transform: scale(1.07); }
      100% { transform: scale(1); }
    }
    /* Animasi gambar terbang ke keranjang */
    .fly-to-cart {
      position: fixed !important;
      z-index: 9999;
      pointer-events: none;
      transition: transform 1.1s cubic-bezier(0.4,1.4,0.6,1), opacity 0.5s;
      border-radius: 0.75rem;
      box-shadow: 0 8px 24px rgba(0,0,0,0.18);
    }
    .fly-to-cart.end {
      opacity: 0;
    }
  </style>
</head>
<body class="bg-gray-100">

  <!-- Header -->
  <header class="bg-white shadow-md p-4 flex justify-between items-center sticky top-0 z-30">
    <div class="flex items-center gap-2">
      <!-- Ikon Motor -->
      <svg class="w-8 h-8 text-blue-700" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v-2a4 4 0 014-4h1m4 0h1a4 4 0 014 4v2m-5-6V4m0 0L7 8m5-4l5 4" />
      </svg>
      <h1 class="text-2xl font-bold text-gray-800 tracking-wide">Wanna_Auto</h1>
    </div>
    <div class="flex-1 mx-4">
      <div class="flex items-center bg-gray-200 rounded-md px-3 shadow-inner">
        <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35M16 10a6 6 0 11-12 0 6 6 0 0112 0z"/>
        </svg>
        <input id="searchInput" type="text" placeholder="Cari spare part motor..." class="bg-transparent w-full py-2 px-2 focus:outline-none text-gray-700"/>
      </div>
    </div>
    <div class="flex items-center gap-4">
      <div class="relative">
        <!-- Ikon Keranjang -->
        <svg id="cartIcon" class="w-7 h-7 text-gray-700 cursor-pointer hover:text-blue-600 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.35 5.4a1 1 0 00.98 1.2h10.74a1 1 0 00.98-1.2L17 13M9 21a1 1 0 100-2 1 1 0 000 2zm6 0a1 1 0 100-2 1 1 0 000 2z"/>
        </svg>
        <span id="cartBadge" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5 shadow">0</span>
      </div>
      <!-- Ikon User Modern -->
      <svg class="w-7 h-7 text-gray-700 cursor-pointer hover:text-blue-600 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0z" />
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 14c-4.418 0-8 1.79-8 4v2h16v-2c0-2.21-3.582-4-8-4z" />
      </svg>
    </div>
  </header>

  <!-- Product Section -->
  <section id="produk" class="p-8 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
    <!-- Produk Card 1 -->
    <div class="produk-card bg-white rounded-xl shadow-lg hover:shadow-2xl transition-shadow border-2 border-gray-200 flex flex-col">
      <img src="styles/bahan/oli.jpg" alt="Oli Motor" class="rounded-t-xl w-full h-80 object-cover border-b"/>
      <div class="p-5 flex-1 flex flex-col">
        <h3 class="produk-nama font-bold text-gray-800 mb-2 text-lg">Oli Motor</h3>
        <p class="text-sm text-gray-600 mb-2 flex-1">Oli motor berkualitas untuk performa mesin maksimal.</p>
        <p class="text-blue-700 font-bold mb-4 text-lg">Rp 55.000</p>
        <button class="btn-tambah w-full bg-blue-700 text-white py-2 rounded-lg font-semibold hover:bg-blue-800 transition mt-auto"
                  data-nama="Oli Motor" data-harga="55000" data-gambar="styles/bahan/oli.jpg">Tambah ke Keranjang</button>
      </div>
    </div>
    <!-- Produk Card 2 -->
    <div class="produk-card bg-white rounded-xl shadow-lg hover:shadow-2xl transition-shadow border-2 border-gray-200 flex flex-col">
      <img src="styles/bahan/aki.jpg" alt="Aki Motor" class="rounded-t-xl w-full h-80 object-cover border-b"/>
      <div class="p-5 flex-1 flex flex-col">
        <h3 class="produk-nama font-bold text-gray-800 mb-2 text-lg">Aki Motor</h3>
        <p class="text-sm text-gray-600 mb-2 flex-1">Aki motor tahan lama dan bergaransi resmi.</p>
        <p class="text-blue-700 font-bold mb-4 text-lg">Rp 210.000</p>
        <button class="btn-tambah w-full bg-blue-700 text-white py-2 rounded-lg font-semibold hover:bg-blue-800 transition mt-auto"
                  data-nama="Aki Motor" data-harga="210000" data-gambar="styles/bahan/aki.jpg">Tambah ke Keranjang</button>
      </div>
    </div>
    <!-- Produk Card 3 -->
    <div class="produk-card bg-white rounded-xl shadow-lg hover:shadow-2xl transition-shadow border-2 border-gray-200 flex flex-col">
      <img src="styles/bahan/kampas.jpg" alt="Kampas Rem Motor" class="rounded-t-xl w-full h-80 object-cover border-b"/>
      <div class="p-5 flex-1 flex flex-col">
        <h3 class="produk-nama font-bold text-gray-800 mb-2 text-lg">Kampas Rem Motor</h3>
        <p class="text-sm text-gray-600 mb-2 flex-1">Kampas rem original untuk keamanan berkendara motor.</p>
        <p class="text-blue-700 font-bold mb-4 text-lg">Rp 45.000</p>
        <button class="btn-tambah w-full bg-blue-700 text-white py-2 rounded-lg font-semibold hover:bg-blue-800 transition mt-auto"
                  data-nama="Kampas Rem Motor" data-harga="45000" data-gambar="styles/bahan/kampas.jpg">Tambah ke Keranjang</button>
      </div>
    </div>
  </section>

 <!-- Footer -->
  <footer class="bg-gray-900 text-white py-10 mt-10">
    <div class="max-w-5xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8">
      <!-- Kontak -->
      <div>
        <h4 class="font-bold text-lg mb-2 text-blue-400">Kontak Kami</h4>
        <p class="mb-1">WhatsApp: <a href="https://wa.me/6282117862420" class="hover:text-blue-300 underline">+62 821-1786-2420</a></p>
        <p class="mb-1">Email: <a href="mailto:muhammaddaiwana@gmail.com" class="hover:text-blue-300 underline">muhammaddaiwana@gmail.com</a></p>
        <p>Instagram: <a href="https://instagram.com/wanna_project25" class="hover:text-blue-300 underline">@wanna_project25</a></p>
      </div>
      <!-- Alamat -->
      <div>
        <h4 class="font-bold text-lg mb-2 text-blue-400">Alamat Toko</h4>
        <p class="mb-1">Jl. Otomotif No. 123</p>
        <p class="mb-1">Kota Motor, 12345</p>
        <p>Indonesia</p>
      </div>
      <!-- Media Sosial -->
      <div>
        <h4 class="font-bold text-lg mb-2 text-blue-400">Ikuti Kami</h4>
        <div class="flex gap-4 mt-2">
          <a href="https://facebook.com/wannaauto" target="_blank" aria-label="Facebook" class="hover:text-blue-400">
            <svg class="w-7 h-7 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M22 12c0-5.522-4.477-10-10-10S2 6.478 2 12c0 5.006 3.657 9.128 8.438 9.877v-6.987h-2.54v-2.89h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.242 0-1.63.771-1.63 1.562v1.875h2.773l-.443 2.89h-2.33v6.987C18.343 21.128 22 17.006 22 12"></path></svg>
          </a>
          <a href="https://instagram.com/wanna_auto" target="_blank" aria-label="Instagram" class="hover:text-pink-400">
            <svg class="w-7 h-7 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5a4.25 4.25 0 0 0 4.25-4.25v-8.5A4.25 4.25 0 0 0 16.25 3.5zm4.25 2.25a6.25 6.25 0 1 1 0 12.5 6.25 6.25 0 0 1 0-12.5zm0 1.5a4.75 4.75 0 1 0 0 9.5 4.75 4.75 0 0 0 0-9.5zm6.25 1.25a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path></svg>
          </a>
          <a href="mailto:info@wannaauto.com" aria-label="Email" class="hover:text-blue-400">
            <svg class="w-7 h-7 inline" fill="currentColor" viewBox="0 0 24 24"><path d="M2.01 6.81A2.25 2.25 0 0 1 4.25 5h15.5a2.25 2.25 0 0 1 2.24 1.81l-10 6.25-10-6.25zm-.01 2.43v8.01A2.25 2.25 0 0 0 4.25 19.5h15.5a2.25 2.25 0 0 0 2.25-2.25v-8.01l-9.47 5.91a.75.75 0 0 1-.81 0L2 9.24z"></path></svg>
          </a>
        </div>
      </div>
    </div>
    <div class="text-center text-gray-400 text-sm mt-8">
      &copy; 2025 Wanna_Auto. Semua Hak Dilindungi.
    </div>
  </footer>


  <!-- Cart Sidebar -->
  <div id="cartSidebar" class="fixed top-0 right-0 h-full w-[28rem] bg-white shadow-lg transform translate-x-full transition-transform duration-300 z-50 rounded-l-xl">
    <div class="flex justify-between items-center p-4 border-b">
      <h2 class="text-lg font-bold">Keranjang Saya</h2>
      <button onclick="toggleCart()" class="text-gray-600 hover:text-red-500 text-xl">&times;</button>
    </div>
    <div class="p-4 space-y-4">
      <div id="cartList" class="max-h-80 overflow-y-auto w-full"></div>
      <!-- Total -->
      <div class="border-t pt-4">
        <p class="font-semibold text-gray-800">Total: <span id="cartTotal" class="text-blue-700">Rp 0</span></p>
        <button id="clearCartBtn" class="mt-4 w-full bg-red-600 text-white py-2 rounded hover:bg-red-700">Kosongkan Keranjang</button>
        <button id="checkoutBtn" class="mt-4 w-full bg-blue-700 text-white py-2 rounded hover:bg-blue-800">Checkout</button>
      </div>
    </div>
  </div>

  <!-- Overlay -->
  <div id="cartOverlay" class="fixed inset-0 bg-black bg-opacity-40 hidden z-40" onclick="toggleCart()"></div>

  <script>
    // Data keranjang
    let cart = [];

    // Render keranjang
    function renderCart() {
      const cartList = document.getElementById('cartList');
      const cartTotal = document.getElementById('cartTotal');
      const cartBadge = document.getElementById('cartBadge');
      cartList.innerHTML = '';
      let total = 0;
      if (cart.length === 0) {
        cartList.innerHTML = '<p class="text-gray-500 text-center">Keranjang kosong.</p>';
      } else {
        cart.forEach((item, idx) => {
          if (item.selected === undefined) item.selected = true;
          if (item.selected) total += item.harga * item.jumlah;
          cartList.innerHTML += `
            <div class="flex items-center gap-3 py-2 border-b">
              <input type="checkbox" class="mr-2 accent-blue-600" data-idx="${idx}" ${item.selected ? 'checked' : ''} onchange="toggleSelectProduct(${idx})">
              <img src="${item.gambar}" alt="${item.nama}" class="w-16 h-16 object-cover rounded shadow border">
              <div class="flex-1">
                <p class="font-medium text-gray-800">${item.nama}</p>
                <div class="flex items-center gap-2 mt-1">
                  <button onclick="decrementQty(${idx})" class="px-2 py-1 bg-gray-200 rounded hover:bg-gray-300 text-lg font-bold">-</button>
                  <span class="mx-1">${item.jumlah}</span>
                  <button onclick="incrementQty(${idx})" class="px-2 py-1 bg-gray-200 rounded hover:bg-gray-300 text-lg font-bold">+</button>
                </div>
                <p class="text-sm text-gray-500 mt-1">Rp ${item.harga.toLocaleString()} /pcs</p>
                <button onclick="removeFromCart(${idx})" class="text-red-500 hover:underline text-xs mt-2">Hapus</button>
              </div>
              <span class="font-bold text-blue-700 ml-2">Rp ${(item.harga * item.jumlah).toLocaleString()}</span>
            </div>
          `;
        });
      }
      cartTotal.textContent = 'Rp ' + total.toLocaleString();
      cartBadge.textContent = cart.length;
    }

    // Pilih produk untuk checkout
    function toggleSelectProduct(idx) {
      cart[idx].selected = !cart[idx].selected;
      renderCart();
    }

    // Tambah ke keranjang
    function addToCart(nama, harga, gambar) {
      const idx = cart.findIndex(item => item.nama === nama);
      if (idx > -1) {
        cart[idx].jumlah += 1;
      } else {
        cart.push({ nama, harga, jumlah: 1, gambar, selected: true });
      }
      renderCart();
    }

    // Hapus produk dari keranjang
    function removeFromCart(idx) {
      cart.splice(idx, 1);
      renderCart();
    }

    // Kosongkan keranjang
    function clearCart() {
      cart = [];
      renderCart();
    }

    // Increment jumlah produk
    function incrementQty(idx) {
      cart[idx].jumlah += 1;
      renderCart();
    }

    // Decrement jumlah produk
    function decrementQty(idx) {
      if (cart[idx].jumlah > 1) {
        cart[idx].jumlah -= 1;
      } else {
        cart.splice(idx, 1);
      }
      renderCart();
    }

    // Event klik ikon keranjang
    document.getElementById('cartIcon').addEventListener('click', toggleCart);

    // Scroll ke produk saat tombol "Belanja Sekarang" ditekan
    // (Element dengan id 'scrollProduk' tidak ada, jadi kode ini dihapus untuk mencegah error)

    // Event tambah ke keranjang pada tombol produk
    document.querySelectorAll('.btn-tambah').forEach(btn => {
      btn.addEventListener('click', function() {
        const nama = this.getAttribute('data-nama');
        const harga = parseInt(this.getAttribute('data-harga'));
        const gambar = this.getAttribute('data-gambar');
        const card = this.closest('.produk-card');
        const imgElem = card.querySelector('img');
        card.classList.remove('pop');
        void card.offsetWidth;
        card.classList.add('pop');
        animateToCart(imgElem);
        addToCart(nama, harga, gambar);
      });
    });

    // Event kosongkan keranjang
    document.getElementById('clearCartBtn').addEventListener('click', clearCart);

    // Simpan hanya produk terpilih ke localStorage sebelum checkout
    document.getElementById('checkoutBtn').addEventListener('click', function() {
      const selectedCart = cart.filter(item => item.selected);
      if (selectedCart.length === 0) {
        alert('Pilih minimal satu produk untuk checkout!');
        return;
      }
      localStorage.setItem('cart', JSON.stringify(selectedCart));
      window.location.href = 'checkout.html';
    });

    // Fitur pencarian produk & sembunyikan hero saat mencari
    document.getElementById('searchInput').addEventListener('input', function() {
      const keyword = this.value.toLowerCase();
      const hero = document.getElementById('hero');
      if (keyword.length > 0) {
        if (hero) hero.style.display = 'none';
      } else {
        if (hero) hero.style.display = '';
      }
      document.querySelectorAll('.produk-card').forEach(card => {
        const nama = card.querySelector('.produk-nama').textContent.toLowerCase();
        if (nama.includes(keyword)) {
          card.style.display = '';
        } else {
          card.style.display = 'none';
        }
      });
    });

    // Render awal
    renderCart();

    function toggleCart() {
      const cart = document.getElementById('cartSidebar');
      const overlay = document.getElementById('cartOverlay');
      cart.classList.toggle('translate-x-full');
      overlay.classList.toggle('hidden');
    }

    // Animasi gambar produk ke keranjang
    function animateToCart(imgElem) {
      const cartIcon = document.getElementById('cartIcon');
      const imgRect = imgElem.getBoundingClientRect();
      const cartRect = cartIcon.getBoundingClientRect();
      const cartCenterX = cartRect.left + cartRect.width / 2;
      const cartCenterY = cartRect.top + cartRect.height / 2;
      const imgCenterX = imgRect.left + imgRect.width / 2;
      const imgCenterY = imgRect.top + imgRect.height / 2;
      const flyingImg = imgElem.cloneNode(true);
      flyingImg.classList.add('fly-to-cart');
      flyingImg.style.top = imgRect.top + 'px';
      flyingImg.style.left = imgRect.left + 'px';
      flyingImg.style.width = imgRect.width + 'px';
      flyingImg.style.height = imgRect.height + 'px';
      document.body.appendChild(flyingImg);
      flyingImg.offsetWidth;
      flyingImg.style.transform = `translate(${cartCenterX - imgCenterX}px, ${cartCenterY - imgCenterY}px) scale(0.2)`;
      flyingImg.classList.add('end');
      setTimeout(() => {
        flyingImg.remove();
      }, 1200);
    }
  </script>
</body>
</html>
